<?xml version="1.0" encoding="utf-8" ?>
<!-- This XML file is include in the csproj. It's the entry point to all our build extensions -->
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <IsBuildTarget>false</IsBuildTarget>
  </PropertyGroup>
  <Target Name="IsBuildTarget"
          AfterTargets="AfterBuild"
          Condition="'$(IsBuildTarget)'=='false' And '$(DistributeSource)' == 'false' And ( '$(ProcessBuildTargets)' == 'True' And '$(ProcessBuildTargets)' == 'true' )"
          Inputs="@(BuildTarget)"
          Outputs="@(BuildTarget -> '%(DestDir)$*TargetFilename)')">
    <Message Text="[Build Divergent]   : $(TargetName).%(Divergent.Identity)" Importance="high"/>
    <!-- Force the Build Process to run again but this time we define new variables. -->
    <MSBuild Projects="$(ProjectPath)" Properties="DefineConstants=%(Divergent.Constants);IsBuildTarget=true;RelativeUnityPath=%(Divergent.RelativeUnityPath)"/>
  </Target>
</Project>